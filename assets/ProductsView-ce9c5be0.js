import{b}from"./vue-router-feb1a2d6.js";import{c as v}from"./cartStore-f6a7a879.js";import{l as L}from"./loadingStore-cfb944cc.js";import{m as k,a as P}from"./pinia-a2ec2acd.js";import{aN as h,aD as n,X as l,a4 as _,Y as t,as as c,F as d,aL as f,bp as p,bk as w,a_ as g,a3 as T,W as V}from"./@vue-9b9f1f8d.js";import{_ as A}from"./index-3ece50f4.js";import"./axios-bff3f665.js";import"./toast-ba4829f6.js";import"./sweetalert2-761b07dd.js";import"./@ckeditor-34cd5b3f.js";import"./vue-d45f05e8.js";import"./vue-demi-71ba0ef2.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-89c4fdf0.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */import"./gsap-8fc7659c.js";const{VITE_APP_URL:u,VITE_APP_PATH:m}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},$={data(){return{productList:[],page:{},selectCategoryList:[],selectCategory:"",nowCategory:"",allProducts:[]}},methods:{getProductList(o=1){this.isLoading=!0,this.$http.get(`${u}/api/${m}/products/?page=${o}`).then(e=>{this.productList=e.data.products,this.page=e.data.pagination,console.log(this.page),console.log(e.data)}).catch(e=>{alert(e.data.message)}).finally(()=>{this.isLoading=!1})},getAllProducts(){this.isLoading=!0,this.$http.get(`${u}/api/${m}/products/all`).then(o=>{console.log(o.data.products),this.allProducts=o.data.products}).catch(o=>{alert(o.data.message)}).finally(()=>{this.isLoading=!1})},getCategory(o,e=1){this.isLoading=!0,this.$http.get(`${u}/api/${m}/products?page=${e}&category=${o}`).then(a=>{console.log("相似類別全部",a.data.products),this.selectCategoryList=a.data.products,this.page=a.data.pagination,this.nowCategory=this.page.category,console.log(this.nowCategory),console.log(this.page),console.log(this.page.category),console.log(a),this.$router.push(`./products?page=${e}&category=${o}`)}).catch(a=>{alert(a.data.message)}).finally(()=>{this.isLoading=!1})},...k(v,["addToCart"])},computed:{...P(L,["isLoading","loadingItem"]),filterProduct(){return this.productList.filter(o=>o.title.match(this.search))},categoryProducts(){return this.allProducts.filter(o=>o.category.match(this.selectCategory))}},mounted(){this.getCategory("",1),this.getAllProducts()},components:{RouterLink:b}},E=t("div",{class:"title py-lg-15"},[t("span",{class:"title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end"},"All Products "),t("h1",{class:"title-main font-serifTc fw-black fs-xl fs-lg-3xl"},"商品ㄧ覽")],-1),R={class:"container"},S={class:"row justify-content-center"},I={class:"col-md-11"},N={class:"d-flex align-items-center justify-content-center justify-content-md-start py-10 border-top border-bottom border-secondary mb-15"},j=t("h3",{class:"fs-sm fs-md-base d-none d-md-block me-12 font-serifTc"}," 商品類別 ",-1),D={class:"d-flex gap-7 justify-content-center"},U=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"全部",-1),B=[U],F=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"餅乾",-1),H=[F],M=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"布丁",-1),O=[M],z={class:"row gy-13"},W=["src"],X={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},Y={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},q=["onClick"],G={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},J=t("span",{class:"sr-only"},null,-1),K=[J],Q={class:"container d-flex justify-content-center py-9"},Z={class:"d-flex align-items-center gap-7"},tt=t("i",{class:"bi bi-arrow-left fs-xl fs-lg-3xl"},null,-1),et=[tt],st=["onClick"],ot=t("i",{class:"bi bi-arrow-right fs-xl fs-lg-3xl"},null,-1),it=[ot];function at(o,e,a,rt,i,r){const y=h("VueLoading"),C=h("RouterLink");return n(),l(d,null,[_(y,{active:o.isLoading,"onUpdate:active":e[0]||(e[0]=s=>o.isLoading=s)},null,8,["active"]),E,t("div",R,[t("div",S,[t("div",I,[t("div",N,[j,t("ul",D,[t("li",{class:c(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory===""}]),onClick:e[1]||(e[1]=s=>r.getCategory(""))},B,2),t("li",{class:c(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="餅乾"}]),onClick:e[2]||(e[2]=s=>r.getCategory("餅乾"))},H,2),t("li",{class:c(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="布丁"}]),onClick:e[3]||(e[3]=s=>r.getCategory("布丁"))},O,2)])]),t("ul",z,[(n(!0),l(d,null,f(i.selectCategoryList,s=>(n(),l("li",{class:"col-6 col-lg-4 d-flex flex-column align-items-center",key:s.id},[_(C,{to:`/product/${s.id}`,class:"mb-6"},{default:w(()=>[t("img",{src:s.imageUrl,alt:""},null,8,W)]),_:2},1032,["to"]),t("h2",X,g(s.title),1),t("p",Y," NT$ "+g(s.price),1),t("button",{type:"button",class:"btn btn-primary text-secondary-light rounded-0",onClick:x=>o.addToCart(s.id)},[T(" 加入購物車 "),s.id===o.loadingItem?(n(),l("div",G,K)):V("",!0)],8,q)]))),128))])])])]),t("div",Q,[t("div",null,[t("ul",Z,[t("li",{class:c(["page-item",{disabled:i.page.has_pre===!1}])},[t("a",{class:"page-link",href:"#",onClick:e[4]||(e[4]=p(s=>r.getCategory(i.nowCategory,i.page.current_page-1),["prevent"]))},et)],2),(n(!0),l(d,null,f(i.page.total_pages,s=>(n(),l("li",{class:c(["",{active:s===i.page.current_page}]),key:s+"pages"},[t("a",{class:"font-english fs-3xl fs-lg-5xl pb-2",href:"#",onClick:p(x=>r.getCategory(i.nowCategory,s),["prevent"])},g(s),9,st)],2))),128)),t("li",{class:c(["page-item",{disabled:!i.page.has_next}])},[t("a",{class:"page-link",href:"#",onClick:e[5]||(e[5]=p(s=>r.getCategory(i.nowCategory,i.page.current_page+1),["prevent"]))},it)],2)])])])],64)}const Pt=A($,[["render",at]]);export{Pt as default};
