import{d as c}from"./pinia-a2ec2acd.js";import{a as s}from"./axios-bff3f665.js";import{T as d}from"./toast-1797c5ef.js";import{l}from"./loadingStore-76618adb.js";const e=l(),{VITE_APP_URL:o,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},m=c("cartStore",{state:()=>({cartList:[],totalQty:0}),actions:{addToCart(t,a=1){const i={product_id:t,qty:a};e.loadingItem=t,s.post(`${o}/api/${r}/cart`,{data:i}).then(n=>{d.fire({icon:"success",title:`${n.data.message}`}),this.getCartList(),e.loadingItem=""}).catch(n=>{d.fire({icon:"error",title:`${n.response.data.message}`})})},getCartList(){e.isLoading=!0,s.get(`${o}/api/${r}/cart`).then(t=>{this.totalQty=0,this.cartList=t.data.data,this.cartList.carts.forEach(a=>{this.totalQty+=a.qty})}).catch(t=>{alert(t.response.data.message)}).finally(()=>{e.isLoading=!1})},updateCartItem(t){const a={product_id:t.product_id,qty:t.qty};e.loadingItem=t.id,s.put(`${o}/api/${r}/cart/${t.id}`,{data:a}).then(()=>{this.getCartList(),e.loadingItem=""}).catch(i=>{alert(i.response.data.message)})},addNum(t){const a={product_id:t.product_id,qty:t.qty+1};e.loadingItem=t.id,s.put(`${o}/api/${r}/cart/${t.id}`,{data:a}).then(()=>{this.getCartList(),e.loadingItem=""}).catch(i=>{alert(i.response.data.message)})},decreaseNum(t){const a={product_id:t.product_id,qty:t.qty-1};e.loadingItem=t.id,s.put(`${o}/api/${r}/cart/${t.id}`,{data:a}).then(()=>{this.getCartList(),e.loadingItem=""}).catch(i=>{alert(i.response.data.message)})},deleteCartItem(t){e.isLoading=!0,this.loadingItem=t.id,s.delete(`${o}/api/${r}/cart/${t.id}`).then(a=>{d.fire({icon:"success",title:`${a.data.message}`}),this.getCartList(),this.loadingItem=""}).catch(a=>{d.fire({icon:"error",title:`${a.response.data.message}`})}).finally(()=>{e.isLoading=!1})},deleteAllCartItem(){s.delete(`${o}/api/${r}/carts`).then(()=>{d.fire({icon:"success",title:"已刪除全部品項"}),this.getCartList()}).catch(t=>{d.fire({icon:"error",title:`${t.response.data.message}`})})}}});export{m as c};
