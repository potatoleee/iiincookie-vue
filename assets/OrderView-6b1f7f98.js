import{c as b}from"./cartStore-f6a7a879.js";import{l as V}from"./loadingStore-cfb944cc.js";import{m as k,a as _}from"./pinia-a2ec2acd.js";import{T as g}from"./toast-ba4829f6.js";import{aN as c,aD as p,X as u,Y as e,a4 as l,a_ as i,a3 as h,F as v,aL as D,bk as w,a2 as L,as as m,bm as T,bd as P}from"./@vue-9b9f1f8d.js";import{_ as E}from"./index-102b8124.js";import"./axios-bff3f665.js";import"./vue-demi-71ba0ef2.js";import"./sweetalert2-761b07dd.js";import"./@ckeditor-34cd5b3f.js";import"./vue-d45f05e8.js";import"./vue-router-feb1a2d6.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-89c4fdf0.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */import"./gsap-8fc7659c.js";const{VITE_APP_URL:S,VITE_APP_PATH:N}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},U={data(){return{orderData:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:""}},methods:{...k(b,["getCartList"]),isPhone(s){return/^(09)[0-9]{8}$/.test(s)?!0:"請填寫正確的手機號碼格式"},createOrder(){this.isLoading=!0,this.$http.post(`${S}/api/${N}/order`,{data:this.orderData}).then(s=>{this.$refs.form.resetForm(),this.orderData.message="",console.log(s),this.orderId=s.data.orderId,g.fire({icon:"success",title:`${s.data.message}`}),this.$router.push(`/pay/${this.orderId}`)}).catch(s=>{g.fire({icon:"error",title:`${s.response.data.message}`})})}},computed:{..._(b,["cartList","totalQty"]),..._(V,["isLoading"])},mounted(){this.getCartList()}},A=L('<div class="title py-15"><span class="title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end">Carts </span><h1 class="title-main font-serifTc fw-black fs-xl fs-lg-3xl">購物車</h1></div><div class="container"><ul class="d-flex justify-content-center align-items-center gap-7"><li class="text-center"><p class="fs-xs fs-lg-sm">Step.1</p><p class="fs-xs fs-lg-sm">購買項目</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.2</p><p class="fs-xs fs-lg-sm">填寫資料</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.3</p><p class="fs-xs fs-lg-sm">確認付款</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.4</p><p class="fs-xs fs-lg-sm">訂單完成</p></li></ul></div>',2),F={class:"container"},C={class:"row my-13"},j={class:"col-lg-7 mb-8 mb-lg-0"},O={class:"p-lg-7 rounded-2 shadow-lg-lg"},q={class:"d-flex justify-content-between align-items-center pb-4 border-bottom border-dark border-opacity-10"},B={class:"fs-lg font-serifTc"},M={class:"fs-lg fw-medium"},R={class:"text-primary"},$={class:"d-flex py-7 gap-3 border-bottom border-dark border-opacity-10"},I=["src"],H={class:"w-100 d-flex flex-column justify-content-between"},Q={class:"d-flex justify-content-between align-items-start"},z={class:"d-flex justify-content-between align-items-center"},X={class:"col-lg-5"},Y={class:"p-lg-7 rounded-2 shadow-lg-lg"},G=e("p",{class:"fs-lg font-serifTc pb-4 border-bottom border-dark border-opacity-10 mb-4"}," 寄送資訊 ",-1),J={class:"mb-3"},K=e("label",{for:"email",class:"form-label"},"Email",-1),W={class:"mb-3"},Z=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),ee={class:"mb-3"},se=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),te={class:"mb-3"},oe=e("label",{for:"address",class:"form-label"},"收件人地址",-1),ae={class:"mb-3"},le=e("label",{for:"message",class:"form-label"},"留言",-1),re=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-secondary-darker text-light w-100"}," 提交訂單 ")],-1);function ie(s,t,de,ne,a,f){const x=c("VueLoading"),d=c("VField"),n=c("ErrorMessage"),y=c("VForm");return p(),u(v,null,[A,e("div",F,[l(x,{active:s.isLoading,"onUpdate:active":t[0]||(t[0]=o=>s.isLoading=o)},null,8,["active"]),e("div",C,[e("div",j,[e("div",O,[e("div",q,[e("p",B,"訂單品項 "+i(s.totalQty),1),e("p",M,[h(" 總金額： "),e("span",R,"NT$"+i(s.cartList.final_total),1)])]),(p(!0),u(v,null,D(s.cartList.carts,o=>(p(),u("ul",{key:o.id},[e("li",null,[e("div",$,[e("img",{class:"w-20n",src:o.product.imageUrl,alt:""},null,8,I),e("div",H,[e("div",Q,[e("p",null,i(o.product.title),1)]),e("div",z,[e("p",null,"NT$ "+i(o.product.price)+" x "+i(o.qty),1),h(" NT$ "+i(o.total),1)])])])])]))),128))])]),e("div",X,[e("div",Y,[G,l(y,{ref:"form",onSubmit:f.createOrder},{default:w(({errors:o})=>[e("div",J,[K,l(d,{id:"email",name:"email",type:"email",class:m(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:a.orderData.user.email,"onUpdate:modelValue":t[1]||(t[1]=r=>a.orderData.user.email=r)},null,8,["class","modelValue"]),l(n,{name:"email",class:"invalid-feedback"})]),e("div",W,[Z,l(d,{id:"name",name:"姓名",type:"text",class:m(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:a.orderData.user.name,"onUpdate:modelValue":t[2]||(t[2]=r=>a.orderData.user.name=r)},null,8,["class","modelValue"]),l(n,{name:"姓名",class:"invalid-feedback"})]),e("div",ee,[se,l(d,{id:"tel",name:"電話",type:"tel",class:m(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:f.isPhone,modelValue:a.orderData.user.tel,"onUpdate:modelValue":t[3]||(t[3]=r=>a.orderData.user.tel=r)},null,8,["class","rules","modelValue"]),l(n,{name:"電話",class:"invalid-feedback"})]),e("div",te,[oe,l(d,{id:"address",name:"地址",type:"text",class:m(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:a.orderData.user.address,"onUpdate:modelValue":t[4]||(t[4]=r=>a.orderData.user.address=r)},null,8,["class","modelValue"]),l(n,{name:"地址",class:"invalid-feedback"})]),e("div",ae,[le,T(e("textarea",{id:"message",class:"form-control border-dark border-opacity-40 rounded-0",cols:"30",rows:"10","onUpdate:modelValue":t[5]||(t[5]=r=>a.orderData.message=r)},null,512),[[P,a.orderData.message]])]),re]),_:1},8,["onSubmit"])])])])])],64)}const Pe=E(U,[["render",ie]]);export{Pe as default};
