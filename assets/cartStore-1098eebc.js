import{d as c}from"./pinia-a2ec2acd.js";import{a as i}from"./axios-bff3f665.js";import{T as d}from"./toast-ba4829f6.js";import{l}from"./loadingStore-cfb944cc.js";const a=l(),{VITE_APP_URL:o,VITE_APP_PATH:r}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},m=c("cartStore",{state:()=>({cart:{}}),actions:{addToCart(t,s=1){const e={product_id:t,qty:s};a.loadingItem=t,i.post(`${o}/api/${r}/cart`,{data:e}).then(n=>{d.fire({icon:"success",title:`${n.data.message}`}),a.loadingItem=""}).catch(n=>{d.fire({icon:"error",title:`${n.response.data.message}`})})},getCartList(){a.isLoading=!0,i.get(`${o}/api/${r}/cart`).then(t=>{this.cart=t.data.data,console.log(this.cart)}).catch(t=>{alert(t.response.data.message)}).finally(()=>{a.isLoading=!1})},updateCartItem(t){const s={product_id:t.product_id,qty:t.qty};a.loadingItem=t.id,i.put(`${o}/api/${r}/cart/${t.id}`,{data:s}).then(e=>{console.log(e),this.getCartList(),a.loadingItem=""}).catch(e=>{alert(e.response.data.message)})},addNum(t){const s={product_id:t.product_id,qty:t.qty+1};a.loadingItem=t.id,i.put(`${o}/api/${r}/cart/${t.id}`,{data:s}).then(e=>{console.log(e),this.getCartList(),a.loadingItem=""}).catch(e=>{alert(e.response.data.message)})},decreaseNum(t){const s={product_id:t.product_id,qty:t.qty-1};a.loadingItem=t.id,i.put(`${o}/api/${r}/cart/${t.id}`,{data:s}).then(e=>{console.log(e),this.getCartList(),a.loadingItem=""}).catch(e=>{alert(e.response.data.message)})},deleteCartItem(t){a.isLoading=!0,this.loadingItem=t.id,i.delete(`${o}/api/${r}/cart/${t.id}`).then(s=>{d.fire({icon:"success",title:`${s.data.message}`}),this.getCartList(),this.loadingItem=""}).catch(s=>{d.fire({icon:"error",title:`${s.response.data.message}`})}).finally(()=>{a.isLoading=!1})},deleteAllCartItem(){i.delete(`${o}/api/${r}/carts`).then(()=>{d.fire({icon:"success",title:"已刪除全部品項"}),this.getCartList()}).catch(t=>{d.fire({icon:"error",title:`${t.response.data.message}`})})}},getters:{cartList:({cart:t})=>t}});export{m as c};
