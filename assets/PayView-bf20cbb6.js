import{c as h}from"./cartStore-f6a7a879.js";import{l as u}from"./loadingStore-cfb944cc.js";import{m as b,a as _}from"./pinia-a2ec2acd.js";import{T as a}from"./toast-ba4829f6.js";import{_ as y}from"./index-8a86d968.js";import{aN as x,aD as l,X as d,a4 as w,Y as s,a3 as m,W as v,a_ as e,F as f,aL as k,a2 as I}from"./@vue-9b9f1f8d.js";import"./axios-bff3f665.js";import"./vue-demi-71ba0ef2.js";import"./sweetalert2-761b07dd.js";import"./@ckeditor-34cd5b3f.js";import"./vue-d45f05e8.js";import"./vue-router-feb1a2d6.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-89c4fdf0.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */import"./gsap-8fc7659c.js";const{VITE_APP_URL:n,VITE_APP_PATH:p}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},L={data(){return{orderId:"",orderInfo:{},orderUser:{},orderProducts:[]}},methods:{...b(h,["getCartList"]),formatDate(t){return new Date(t*1e3).toLocaleString()},getAllOrder(){this.$http.get(`${n}/api/${p}/orders`).then(t=>{console.log(t)}).catch(t=>{a.fire({icon:"error",title:`${t.response.data.message}`})})},getOrder(){this.orderId=this.$route.params.id,this.$http.get(`${n}/api/${p}/order/${this.orderId}`).then(t=>{console.log(t),this.orderInfo=t.data.order,this.orderUser=t.data.order.user,this.orderProducts=t.data.order.products,console.log(this.orderInfo),console.log(this.orderProducts)}).catch(t=>{a.fire({icon:"error",title:`${t.response.data.message}`})})},pay(){this.orderId=this.$route.params.id,this.$http.post(`${n}/api/${p}/pay/${this.orderId}`).then(t=>{a.fire({icon:"success",title:`${t.data.message}`}),console.log(t),this.$router.push(`/complete/${this.orderId}`)}).catch(t=>{a.fire({icon:"error",title:`${t.response.data.message}`})})}},computed:{..._(h,["cartList","totalQty"]),..._(u,["isLoading"])},mounted(){this.getAllOrder(),this.getCartList(),this.getOrder()}},T=I('<div class="title py-15"><span class="title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end">Payment </span><h1 class="title-main font-serifTc fw-black fs-xl fs-lg-3xl">付款</h1></div><div class="container"><ul class="d-flex justify-content-center align-items-center gap-7"><li class="text-center"><p class="fs-xs fs-lg-sm">Step.1</p><p class="fs-xs fs-lg-sm">購買項目</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.2</p><p class="fs-xs fs-lg-sm">填寫資料</p></li><i class="bi bi-chevron-right text-primary"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.3</p><p class="fs-xs fs-lg-sm">確認付款</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.4</p><p class="fs-xs fs-lg-sm">訂單完成</p></li></ul></div>',2),V={class:"container"},$={class:"row my-13"},P={class:"col-lg-7 mb-8 mb-lg-0"},S={class:"p-lg-7 rounded-2 shadow-lg-lg"},U={class:"d-flex justify-content-between align-items-center pb-4 border-bottom border-dark border-opacity-10"},A={class:"fs-lg"},N={key:0,class:"text-danger"},D={class:"fs-lg"},E={class:"text-primary"},O={class:"font-arimo"},j={class:"d-flex py-7 gap-3 border-bottom border-dark border-opacity-10"},C=["src"],B={class:"w-100 d-flex flex-column justify-content-between"},R={class:"d-flex justify-content-between align-items-start"},F={class:"d-flex justify-content-between align-items-center"},H={class:"font-arimo"},q={class:"font-arimo"},M={class:"col-lg-5"},Q={class:"p-lg-7 rounded-2 shadow-lg-lg"},W=s("p",{class:"fs-lg pb-4 border-bottom border-dark border-opacity-10"}," 訂單資訊 ",-1),X={class:"table mb-6"},Y={class:"border-dark border-opacity-10"},z=s("th",{class:"fw-regular ps-0",width:"120"},"訂單金額：",-1),G={class:"font-arimo"},J={class:"border-dark border-opacity-10"},K=s("th",{class:"fw-regular ps-0",width:"120"},"訂單編號：",-1),Z={class:"border-dark border-opacity-10"},ss=s("th",{class:"fw-regular ps-0",width:"120"},"下單時間：",-1),ts={class:"border-dark border-opacity-10"},es=s("th",{class:"fw-regular ps-0",width:"120"},"寄送地址：",-1),os={class:"border-dark border-opacity-10"},rs=s("th",{class:"fw-regular ps-0",width:"120"},"顧客姓名：",-1),is={class:"border-dark border-opacity-10"},as=s("th",{class:"fw-regular ps-0",width:"120"},"聯絡電話：",-1),ls={class:"border-dark border-opacity-10"},ds=s("th",{class:"fw-regular ps-0",width:"120"},"電子信箱：",-1),cs={class:"border-dark border-opacity-10"},ns=s("th",{class:"fw-regular ps-0",width:"120"},"備註：",-1);function ps(t,i,hs,_s,o,c){const g=x("VueLoading");return l(),d(f,null,[w(g,{active:t.isLoading,"onUpdate:active":i[0]||(i[0]=r=>t.isLoading=r)},null,8,["active"]),T,s("div",V,[s("div",$,[s("div",P,[s("div",S,[s("div",U,[s("p",A,[m(" 訂單品項 "),o.orderInfo.is_paid?v("",!0):(l(),d("span",N,"未付款"))]),s("p",D,[m(" 總金額： "),s("span",E,[s("span",O,"NT$ "+e(o.orderInfo.total),1)])])]),(l(!0),d(f,null,k(o.orderProducts,r=>(l(),d("ul",{key:r.id},[s("li",null,[s("div",j,[s("img",{class:"w-20n",src:r.product.imageUrl,alt:""},null,8,C),s("div",B,[s("div",R,[s("p",null,e(r.product.title),1)]),s("div",F,[s("p",H," NT$ "+e(r.product.price)+" x "+e(r.qty),1),s("p",q,"NT$ "+e(r.total),1)])])])])]))),128))])]),s("div",M,[s("div",Q,[W,s("table",X,[s("tbody",null,[s("tr",Y,[z,s("td",G,"NT$ "+e(o.orderInfo.total),1)]),s("tr",J,[K,s("td",null,e(o.orderInfo.id),1)]),s("tr",Z,[ss,s("td",null,e(c.formatDate(o.orderInfo.create_at)),1)]),s("tr",ts,[es,s("td",null,e(o.orderUser.address),1)]),s("tr",os,[rs,s("td",null,e(o.orderUser.name),1)]),s("tr",is,[as,s("td",null,e(o.orderUser.tel),1)]),s("tr",ls,[ds,s("td",null,e(o.orderUser.email),1)]),s("tr",cs,[ns,s("td",null,e(o.orderInfo.message),1)])])]),s("button",{type:"button",class:"btn btn-primary text-light w-100",onClick:i[1]||(i[1]=(...r)=>c.pay&&c.pay(...r))}," 確認付款 ")])])])])],64)}const As=y(L,[["render",ps]]);export{As as default};
