import{c as b}from"./cartStore-19166685.js";import{l as k}from"./loadingStore-e394031f.js";import{L as D}from"./LoadingComponent-a3f6a6ee.js";import{m as w,a as g}from"./pinia-a78a79b1.js";import{T as h}from"./toast-1797c5ef.js";import{aN as d,aD as u,X as f,a4 as a,Y as s,bk as x,a3 as i,a_ as n,F as v,aL as T,a2 as P,as as p,bm as E,bd as S}from"./@vue-9b9f1f8d.js";import{_ as N}from"./index-a182a977.js";import"./axios-bff3f665.js";import"./logo-ec0194c9.js";import"./vue-demi-71ba0ef2.js";import"./sweetalert2-2726e422.js";import"./@ckeditor-f5fb1894.js";import"./vue-cfa7fbc0.js";import"./vue-router-fe912644.js";import"./aos-dcf01651.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-7a4b91db.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */import"./gsap-8fc7659c.js";const{VITE_APP_URL:C,VITE_APP_PATH:U}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},A={data(){return{orderData:{user:{name:"",email:"",tel:"",address:""},message:""},orderId:"",isLoading:!0}},components:{LoadingComponent:D},methods:{...w(b,["getCartList"]),isPhone(l){return/^(09)[0-9]{8}$/.test(l)?!0:"請填寫正確的手機號碼格式"},createOrder(){this.isLoading=!0,this.$http.post(`${C}/api/${U}/order`,{data:this.orderData}).then(l=>{this.$refs.form.resetForm(),this.orderData.message="",this.orderId=l.data.orderId,h.fire({icon:"success",title:`${l.data.message}`}),this.isLoading=!1,this.$router.push(`/pay/${this.orderId}`)}).catch(l=>{h.fire({icon:"error",title:`${l.response.data.message}`})})}},computed:{...g(b,["cartList","totalQty"]),...g(k,["isLoading"])},mounted(){this.getCartList(),this.isLoading=!1}},F=P('<div class="title my-10 my-lg-15"><span class="title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end">Carts </span><h1 class="title-main font-serifTc fw-black fs-xl fs-lg-3xl">購物車</h1></div><div class="container"><ul class="d-flex justify-content-center align-items-center gap-lg-7 gap-1"><li class="text-center"><p class="fs-xs fs-lg-sm">Step.1</p><p class="fs-xs fs-lg-sm">購買項目</p></li><i class="bi bi-chevron-right"></i><li class="text-center text-primary"><p class="fs-xs fs-lg-sm">Step.2</p><p class="fs-xs fs-lg-sm">填寫資料</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.3</p><p class="fs-xs fs-lg-sm">確認付款</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.4</p><p class="fs-xs fs-lg-sm">訂單完成</p></li></ul></div>',2),R={class:"container"},j={class:"row my-13"},M={class:"col-lg-7 mb-8 mb-lg-0"},O={class:"p-lg-7 rounded-2 shadow-lg-lg"},q=s("i",{class:"bi bi-chevron-left fs-xl"},null,-1),B={class:"d-flex justify-content-between align-items-center pb-4 border-bottom border-dark border-opacity-10"},I={class:"fs-lg"},$={class:"font-arimo"},H={class:"fs-lg"},Q={class:"text-primary font-arimo"},z={class:"d-flex py-7 gap-3 border-bottom border-dark border-opacity-10"},X=["src"],Y={class:"w-100 d-flex flex-column justify-content-between"},G={class:"d-flex justify-content-between align-items-start"},J={class:"d-flex justify-content-between align-items-center"},K={class:"font-arimo"},W={class:"font-arimo"},Z={class:"col-lg-5"},ss={class:"p-lg-7 rounded-2 shadow-lg-lg"},es=s("p",{class:"fs-lg pb-4 border-bottom border-dark border-opacity-10 mb-4"}," 寄送資訊 ",-1),ts={class:"mb-3"},os=s("label",{for:"email",class:"form-label"},[i("Email"),s("span",{class:"text-danger"},"*")],-1),as={class:"mb-3"},ls=s("label",{for:"name",class:"form-label"},[i("收件人姓名"),s("span",{class:"text-danger"},"*")],-1),rs={class:"mb-3"},is=s("label",{for:"tel",class:"form-label"},[i("收件人電話"),s("span",{class:"text-danger"},"*")],-1),ns={class:"mb-3"},ds=s("label",{for:"address",class:"form-label"},[i("收件人地址 "),s("span",{class:"text-danger"},"*")],-1),cs={class:"mb-3"},ms=s("label",{for:"message",class:"form-label"},"留言",-1),ps=s("div",{class:"text-end"},[s("button",{type:"submit",class:"btn btn-primary text-light w-100"}," 提交訂單 ")],-1);function us(l,e,fs,_s,t,_){const y=d("LoadingComponent"),V=d("RouterLink"),c=d("VField"),m=d("ErrorMessage"),L=d("VForm");return u(),f(v,null,[a(y,{isLoading:t.isLoading},null,8,["isLoading"]),F,s("div",R,[s("div",j,[s("div",M,[s("div",O,[a(V,{to:"/cart",class:"d-flex align-items-center gap-2 mb-5"},{default:x(()=>[q,i("返回購物車")]),_:1}),s("div",B,[s("p",I,[i(" 訂單品項 "),s("span",$,n(l.totalQty),1)]),s("p",H,[i(" 總金額： "),s("span",Q," NT$ "+n(Math.round(l.cartList.final_total)),1)])]),(u(!0),f(v,null,T(l.cartList.carts,o=>(u(),f("ul",{key:o.id},[s("li",null,[s("div",z,[s("img",{class:"w-20n",src:o.product.imageUrl,alt:""},null,8,X),s("div",Y,[s("div",G,[s("p",null,n(o.product.title),1)]),s("div",J,[s("p",K," NT$ "+n(o.product.price)+" x "+n(o.qty),1),s("p",W,"NT$ "+n(o.total),1)])])])])]))),128))])]),s("div",Z,[s("div",ss,[es,a(L,{ref:"form",onSubmit:_.createOrder},{default:x(({errors:o})=>[s("div",ts,[os,a(c,{id:"email",name:"email",type:"email",class:p(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:t.orderData.user.email,"onUpdate:modelValue":e[0]||(e[0]=r=>t.orderData.user.email=r)},null,8,["class","modelValue"]),a(m,{name:"email",class:"invalid-feedback"})]),s("div",as,[ls,a(c,{id:"name",name:"姓名",type:"text",class:p(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.orderData.user.name,"onUpdate:modelValue":e[1]||(e[1]=r=>t.orderData.user.name=r)},null,8,["class","modelValue"]),a(m,{name:"姓名",class:"invalid-feedback"})]),s("div",rs,[is,a(c,{id:"tel",name:"電話",type:"tel",class:p(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:_.isPhone,modelValue:t.orderData.user.tel,"onUpdate:modelValue":e[2]||(e[2]=r=>t.orderData.user.tel=r)},null,8,["class","rules","modelValue"]),a(m,{name:"電話",class:"invalid-feedback"})]),s("div",ns,[ds,a(c,{id:"address",name:"地址",type:"text",class:p(["form-control border-dark border-opacity-40 rounded-0",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.orderData.user.address,"onUpdate:modelValue":e[3]||(e[3]=r=>t.orderData.user.address=r)},null,8,["class","modelValue"]),a(m,{name:"地址",class:"invalid-feedback"})]),s("div",cs,[ms,E(s("textarea",{id:"message",class:"form-control border-dark border-opacity-40 rounded-0",cols:"30",rows:"10","onUpdate:modelValue":e[4]||(e[4]=r=>t.orderData.message=r)},null,512),[[S,t.orderData.message]])]),ps]),_:1},8,["onSubmit"])])])])])],64)}const js=N(A,[["render",us]]);export{js as default};
