import{b as w}from"./vue-router-feb1a2d6.js";import{L as T}from"./LoadingComponent-f4b4b058.js";import{c as A}from"./cartStore-062fedc0.js";import{f}from"./favoriteStore-8d4f6693.js";import{g as _,S as b}from"./gsap-8fc7659c.js";import{S as k}from"./split-type-cdcb87fd.js";import{m as y,a as S}from"./pinia-a2ec2acd.js";import{aN as C,aD as r,X as a,a4 as v,Y as t,as as l,F as p,aL as x,bp as g,bk as $,a_ as m,a3 as F,W as V}from"./@vue-9b9f1f8d.js";import{_ as E}from"./index-12749196.js";import"./logo-ec0194c9.js";import"./axios-bff3f665.js";import"./toast-1797c5ef.js";import"./sweetalert2-2726e422.js";import"./@ckeditor-f5fb1894.js";import"./vue-cfa7fbc0.js";import"./loadingStore-76618adb.js";import"./vue-demi-71ba0ef2.js";import"./aos-dcf01651.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-7a4b91db.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */_.registerPlugin(k,b);const{VITE_APP_URL:h,VITE_APP_PATH:u}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},N={data(){return{productList:[],page:{},selectCategoryList:[],selectCategory:"",nowCategory:"",allProducts:[],isLoading:!0}},methods:{getProductList(e=1){this.isLoading=!0,this.$http.get(`${h}/api/${u}/products/?page=${e}`).then(s=>{this.productList=s.data.products,this.page=s.data.pagination}).catch(s=>{alert(s.data.message)}).finally(()=>{this.isLoading=!1})},getAllProducts(){this.isLoading=!0,this.$http.get(`${h}/api/${u}/products/all`).then(e=>{console.log(e.data.products),this.allProducts=e.data.products}).catch(e=>{alert(e.data.message)}).finally(()=>{this.isLoading=!1})},getCategory(e,s=1){this.$http,this.$http.get(`${h}/api/${u}/products?page=${s}&category=${e}`).then(c=>{this.selectCategoryList=c.data.products,this.page=c.data.pagination,this.nowCategory=this.page.category,this.$router.push(`./products?page=${s}&category=${e}`)}).catch(c=>{alert(c.data.message)})},...y(A,["addToCart"]),...y(f,["removeFavorite","toggleFavorite","isFavorite"])},computed:{...S(f,["myFavoriteList"]),filterProduct(){return this.productList.filter(e=>e.title.match(this.search))},categoryProducts(){return this.allProducts.filter(e=>e.category.match(this.selectCategory))}},watch:{myFavoriteList:{handler(){localStorage.setItem("myFavoriteList",JSON.stringify(this.myFavoriteList))},deep:!0}},mounted(){this.getCategory("",1),this.getAllProducts();const e=this.$refs.myTextAllProducts;new k(e),e.querySelectorAll(".line").forEach(s=>{s.style.textAlign="end"}),this.$nextTick(()=>{_.to(e.querySelectorAll(".char"),{y:0,stagger:.05,delay:1,duration:.2});const s=document.querySelectorAll(".mask-bg");_.to(s,{duration:1,width:"0%",ease:"power3.inOut"})})},updated(){b.refresh()},components:{RouterLink:w,LoadingComponent:T}},R={class:"title my-10 my-lg-15"},I=t("span",{class:"title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end"},"All Products ",-1),j={class:"title-main font-serifTc fw-black fs-xl fs-lg-3xl clip-path",ref:"myTextAllProducts"},B={class:"container"},D={class:"row justify-content-center"},O={class:"col-md-12"},U={class:"d-flex align-items-center justify-content-center justify-content-md-start py-10 border-top border-bottom border-secondary mb-15"},q=t("h3",{class:"fs-sm fs-md-base d-none d-md-block me-12 font-serifTc"}," 商品類別 ",-1),H={class:"d-flex gap-7 justify-content-center"},z=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"全部",-1),M=[z],W=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"餅乾",-1),J=[W],X=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"布丁",-1),Y=[X],G={class:"row gy-13"},K={class:"position-relative"},Q=["src"],Z={class:"position-absolute z-2 end-4n top-4n"},tt=["onClick"],et=["onClick"],st={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},ot={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},it=["onClick"],rt={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},at=t("span",{class:"sr-only"},null,-1),nt=[at],lt={class:"container d-flex justify-content-center py-9"},ct={class:"d-flex align-items-center gap-7"},dt=t("i",{class:"bi bi-arrow-left fs-xl fs-lg-3xl"},null,-1),pt=[dt],gt=["onClick"],mt=t("i",{class:"bi bi-arrow-right fs-xl fs-lg-3xl"},null,-1),ht=[mt];function ut(e,s,c,_t,i,n){const L=C("LoadingComponent"),P=C("RouterLink");return r(),a(p,null,[v(L,{isLoading:i.isLoading},null,8,["isLoading"]),t("div",R,[I,t("h1",j," 商品ㄧ覽 ",512)]),t("div",B,[t("div",D,[t("div",O,[t("div",U,[q,t("ul",H,[t("li",{class:l(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory===""}]),onClick:s[0]||(s[0]=o=>n.getCategory(""))},M,2),t("li",{class:l(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="餅乾"}]),onClick:s[1]||(s[1]=o=>n.getCategory("餅乾"))},J,2),t("li",{class:l(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="布丁"}]),onClick:s[2]||(s[2]=o=>n.getCategory("布丁"))},Y,2)])]),t("ul",G,[(r(!0),a(p,null,x(i.selectCategoryList,o=>(r(),a("li",{class:"col-6 col-lg-4 d-flex flex-column align-items-center",key:o.id},[t("div",K,[v(P,{to:`/product/${o.id}`,class:"mb-6 imgHover"},{default:$(()=>[t("img",{src:o.imageUrl,alt:""},null,8,Q)]),_:2},1032,["to"]),t("div",Z,[e.isFavorite(o)?(r(),a("i",{key:0,class:"bi bi-heart-fill fs-xl text-light",onClick:d=>e.toggleFavorite(o)},null,8,tt)):(r(),a("i",{key:1,class:"bi bi-heart fs-xl text-light",onClick:d=>e.toggleFavorite(o)},null,8,et))])]),t("h2",st,m(o.title),1),t("p",ot," NT$ "+m(o.price),1),t("button",{type:"button",class:"btn btn-outline-primary rounded-0",onClick:d=>e.addToCart(o.id)},[F(" 加入購物車 "),o.id===e.loadingItem?(r(),a("div",rt,nt)):V("",!0)],8,it)]))),128))])])])]),t("div",lt,[t("div",null,[t("ul",ct,[t("li",{class:l(["page-item",{disabled:i.page.has_pre===!1}])},[t("a",{class:"page-link",href:"#",onClick:s[3]||(s[3]=g(o=>n.getCategory(i.nowCategory,i.page.current_page-1),["prevent"]))},pt)],2),(r(!0),a(p,null,x(i.page.total_pages,o=>(r(),a("li",{class:l(["",{active:o===i.page.current_page}]),key:o+"pages"},[t("a",{class:"font-english fs-3xl fs-lg-5xl pb-2",href:"#",onClick:g(d=>n.getCategory(i.nowCategory,o),["prevent"])},m(o),9,gt)],2))),128)),t("li",{class:l(["page-item",{disabled:!i.page.has_next}])},[t("a",{class:"page-link",href:"#",onClick:s[4]||(s[4]=g(o=>n.getCategory(i.nowCategory,i.page.current_page+1),["prevent"]))},ht)],2)])])])],64)}const Ot=E(N,[["render",ut]]);export{Ot as default};
