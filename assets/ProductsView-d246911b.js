import{b as x}from"./vue-router-feb1a2d6.js";import{c as k}from"./cartStore-f6a7a879.js";import{l as F}from"./loadingStore-cfb944cc.js";import{m as L,a as w}from"./pinia-a2ec2acd.js";import{aN as y,aD as a,X as r,a4 as f,Y as t,F as p,aL as m,as as c,bp as h,a3 as v,a_ as d,bk as I,W as P}from"./@vue-9b9f1f8d.js";import{_ as T}from"./index-86a1b97e.js";import"./axios-bff3f665.js";import"./toast-ba4829f6.js";import"./sweetalert2-761b07dd.js";import"./@ckeditor-34cd5b3f.js";import"./vue-d45f05e8.js";import"./vue-demi-71ba0ef2.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-89c4fdf0.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */import"./gsap-8fc7659c.js";const{VITE_APP_URL:u,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{productList:[],page:{},selectCategoryList:[],selectCategory:"",nowCategory:"",allProducts:[],myFavorite:JSON.parse(localStorage.getItem("myFavorite"))||[],myFavoriteId:JSON.parse(localStorage.getItem("myFavoriteId"))||[]}},methods:{toggleFavorite(s){const o=this.myFavorite.findIndex(l=>l.id===s.id);o===-1?(this.myFavorite.push(s),this.myFavoriteId.push(s.id),console.log("加到我得最愛")):(this.myFavorite.splice(o,1),this.myFavoriteId.splice(o,1),console.log("重複刪除"))},removeFromFavorites(s){this.myFavorite.splice(s,1),this.myFavoriteId.splice(s,1),localStorage.setItem("myFavorite",JSON.stringify(this.myFavorite)),console.log("移除產品")},getProductList(s=1){this.isLoading=!0,this.$http.get(`${u}/api/${_}/products/?page=${s}`).then(o=>{this.productList=o.data.products,this.page=o.data.pagination,console.log(this.page),console.log(o.data)}).catch(o=>{alert(o.data.message)}).finally(()=>{this.isLoading=!1})},getAllProducts(){this.isLoading=!0,this.$http.get(`${u}/api/${_}/products/all`).then(s=>{console.log(s.data.products),this.allProducts=s.data.products}).catch(s=>{alert(s.data.message)}).finally(()=>{this.isLoading=!1})},getCategory(s,o=1){this.isLoading=!0,this.$http.get(`${u}/api/${_}/products?page=${o}&category=${s}`).then(l=>{console.log("相似類別全部",l.data.products),this.selectCategoryList=l.data.products,this.page=l.data.pagination,this.nowCategory=this.page.category,console.log(this.nowCategory),console.log(this.page),console.log(this.page.category),console.log(l),this.$router.push(`./products?page=${o}&category=${s}`)}).catch(l=>{alert(l.data.message)}).finally(()=>{this.isLoading=!1})},...L(k,["addToCart"])},computed:{...w(F,["isLoading","loadingItem"]),filterProduct(){return this.productList.filter(s=>s.title.match(this.search))},categoryProducts(){return this.allProducts.filter(s=>s.category.match(this.selectCategory))}},watch:{myFavorite:{handler(){localStorage.setItem("myFavorite",JSON.stringify(this.myFavorite))},deep:!0},myFavoriteId:{handler(){localStorage.setItem("myFavoriteId",JSON.stringify(this.myFavoriteId))},deep:!0}},mounted(){this.getCategory("",1),this.getAllProducts()},components:{RouterLink:x}},V=t("div",{class:"title py-lg-15"},[t("span",{class:"title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end"},"All Products "),t("h1",{class:"title-main font-serifTc fw-black fs-xl fs-lg-3xl"},"商品ㄧ覽")],-1),N=["onClick"],A=["src"],E={class:"container"},$={class:"row justify-content-center"},O={class:"col-md-12"},R={class:"d-flex align-items-center justify-content-center justify-content-md-start py-10 border-top border-bottom border-secondary mb-15"},U=t("h3",{class:"fs-sm fs-md-base d-none d-md-block me-12 font-serifTc"}," 商品類別 ",-1),j={class:"d-flex gap-7 justify-content-center"},D=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"全部",-1),J=[D],B=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"餅乾",-1),z=[B],H=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"布丁",-1),M=[H],W={class:"row gy-13"},X={class:"position-relative"},Y=["src"],q={class:"position-absolute z-3 end-4n top-4n"},G=["onClick"],K=["onClick"],Q={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},Z={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},tt=["onClick"],et={key:0,class:"spinner-border text-light spinner-border-sm",role:"status"},st=t("span",{class:"sr-only"},null,-1),ot=[st],it={class:"container d-flex justify-content-center py-9"},at={class:"d-flex align-items-center gap-7"},rt=t("i",{class:"bi bi-arrow-left fs-xl fs-lg-3xl"},null,-1),lt=[rt],nt=["onClick"],ct=t("i",{class:"bi bi-arrow-right fs-xl fs-lg-3xl"},null,-1),dt=[ct];function gt(s,o,l,pt,i,n){const C=y("VueLoading"),b=y("RouterLink");return a(),r(p,null,[f(C,{active:s.isLoading,"onUpdate:active":o[0]||(o[0]=e=>s.isLoading=e)},null,8,["active"]),V,t("div",null,[t("ul",null,[(a(!0),r(p,null,m(i.myFavorite,(e,g)=>(a(),r("li",{key:e.id},[t("button",{class:"btn btn-primary",onClick:mt=>n.removeFromFavorites(g)}," 移除 ",8,N),v(" "+d(e.title)+" "+d(e.id)+" NT$ "+d(e.price)+" ",1),t("img",{src:e.imageUrl,width:"300",alt:""},null,8,A)]))),128))])]),t("div",E,[t("div",$,[t("div",O,[t("div",R,[U,t("ul",j,[t("li",{class:c(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory===""}]),onClick:o[1]||(o[1]=e=>n.getCategory(""))},J,2),t("li",{class:c(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="餅乾"}]),onClick:o[2]||(o[2]=e=>n.getCategory("餅乾"))},z,2),t("li",{class:c(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="布丁"}]),onClick:o[3]||(o[3]=e=>n.getCategory("布丁"))},M,2)])]),t("ul",W,[(a(!0),r(p,null,m(i.selectCategoryList,e=>(a(),r("li",{class:"col-6 col-lg-4 d-flex flex-column align-items-center",key:e.id},[t("div",X,[f(b,{to:`/product/${e.id}`,class:"mb-6"},{default:I(()=>[t("img",{src:e.imageUrl,alt:""},null,8,Y)]),_:2},1032,["to"]),t("div",q,[i.myFavoriteId.includes(e.id)?(a(),r("i",{key:1,class:"bi bi-heart-fill fs-xl text-light",onClick:g=>n.toggleFavorite(e)},null,8,K)):(a(),r("i",{key:0,class:"bi bi-heart fs-xl text-light",onClick:g=>n.toggleFavorite(e)},null,8,G))])]),t("h2",Q,d(e.title),1),t("p",Z," NT$ "+d(e.price),1),t("button",{type:"button",class:"btn btn-primary text-secondary-light rounded-0",onClick:g=>s.addToCart(e.id)},[v(" 加入購物車 "),e.id===s.loadingItem?(a(),r("div",et,ot)):P("",!0)],8,tt)]))),128))])])])]),t("div",it,[t("div",null,[t("ul",at,[t("li",{class:c(["page-item",{disabled:i.page.has_pre===!1}])},[t("a",{class:"page-link",href:"#",onClick:o[4]||(o[4]=h(e=>n.getCategory(i.nowCategory,i.page.current_page-1),["prevent"]))},lt)],2),(a(!0),r(p,null,m(i.page.total_pages,e=>(a(),r("li",{class:c(["",{active:e===i.page.current_page}]),key:e+"pages"},[t("a",{class:"font-english fs-3xl fs-lg-5xl pb-2",href:"#",onClick:h(g=>n.getCategory(i.nowCategory,e),["prevent"])},d(e),9,nt)],2))),128)),t("li",{class:c(["page-item",{disabled:!i.page.has_next}])},[t("a",{class:"page-link",href:"#",onClick:o[5]||(o[5]=h(e=>n.getCategory(i.nowCategory,i.page.current_page+1),["prevent"]))},dt)],2)])])])],64)}const Nt=T(S,[["render",gt]]);export{Nt as default};
