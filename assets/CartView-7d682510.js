import{c as g}from"./cartStore-19166685.js";import{L as T}from"./LoadingComponent-e63dd047.js";import{g as u}from"./gsap-8fc7659c.js";import{S as h}from"./split-type-cdcb87fd.js";import{m as S,a as A}from"./pinia-a78a79b1.js";import{T as y}from"./toast-1797c5ef.js";import{aN as x,aD as i,X as n,a4 as p,Y as t,bk as _,W as C,F as v,aL as N,a3 as r,a_ as l,bm as k,bd as w,a2 as V,as as $}from"./@vue-9b9f1f8d.js";import{_ as j}from"./index-cfd485d4.js";import"./axios-bff3f665.js";import"./logo-ec0194c9.js";import"./vue-demi-71ba0ef2.js";import"./sweetalert2-2726e422.js";import"./@ckeditor-f5fb1894.js";import"./vue-cfa7fbc0.js";import"./vue-router-fe912644.js";import"./aos-dcf01651.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-7a4b91db.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */u.registerPlugin(h);const{VITE_APP_URL:P,VITE_APP_PATH:E}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},U={data(){return{productListData:[],productId:"",loadingItem:"",couponCode:"iiincookienew",isCouponUsed:!1,isLoading:!0}},components:{LoadingComponent:T},methods:{...S(g,["getCartList","deleteCartItem","updateCartItem","deleteAllCartItem","addNum","decreaseNum"]),useCoupon(){const s={code:this.couponCode};this.$http.post(`${P}/api/${E}/coupon`,{data:s}).then(o=>{y.fire({icon:"success",title:`${o.data.message}`}),this.getCartList(),this.isCouponUsed=!0}).catch(o=>{y.fire({icon:"error",title:`${o.response.data.message}`})})}},computed:{...A(g,["cartList","totalQty"])},mounted(){const s=this.$refs.splitCart,o=this.$refs.splitCartCh;new h(s),new h(o),o.querySelectorAll(".line").forEach(d=>{d.style.textAlign="end"}),this.$nextTick(()=>{u.fromTo(o.querySelectorAll(".char"),{y:0,opacity:0},{y:0,x:0,opacity:1,stagger:.05,delay:1,duration:.2}),u.fromTo(s.querySelectorAll(".char"),{y:0,opacity:0},{y:0,x:0,opacity:1,stagger:.05,delay:1,duration:.2});const d=document.querySelectorAll(".mask-bg");u.to(d,{duration:1,width:"0%",ease:"power3.inOut"})}),this.getCartList(),this.isLoading=!1}},q={class:"title my-10 my-lg-15"},D={class:"title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end",ref:"splitCart"},M={class:"title-main font-serifTc fw-black fs-xl fs-lg-3xl",ref:"splitCartCh"},R={key:0,class:"container d-flex flex-column align-items-center gap-6 mt-12"},B=t("p",{class:"text-center fs-lg-xl"},"目前購物車是空的喔！",-1),O=t("i",{class:"bi bi-arrow-up-right fs-xs ms-2"},null,-1),Q={key:1},F=V('<div class="container"><ul class="d-flex justify-content-center align-items-center gap-lg-7 gap-1"><li class="text-center text-primary"><p class="fs-xs fs-lg-sm">Step.1</p><p class="fs-xs fs-lg-sm">購買項目</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.2</p><p class="fs-xs fs-lg-sm">填寫資料</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.3</p><p class="fs-xs fs-lg-sm">確認付款</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.4</p><p class="fs-xs fs-lg-sm">訂單完成</p></li></ul></div>',1),H={class:"container"},W={class:"row my-13"},z={class:"col-lg-7 mb-8 mb-lg-0"},I={class:"p-lg-7 rounded-2 shadow-lg-lg"},X={class:"d-flex justify-content-between mb-5"},Y=t("i",{class:"bi bi-chevron-left fs-xl"},null,-1),G={class:"d-flex justify-content-between align-items-center pb-4 border-bottom border-dark border-opacity-10"},J=t("p",{class:"fs-lg"},"購物車品項",-1),K={class:"d-flex py-7 gap-3 border-bottom border-dark border-opacity-10"},Z=["src"],tt={class:"w-100 d-flex flex-column justify-content-between"},st={class:"d-flex justify-content-between align-items-start"},et=["onClick","disabled"],ot={class:"d-flex justify-content-between align-items-end"},it={class:"font-arimo"},nt={class:"count d-flex justify-content-between border border-dark border-opacity-40"},lt=["onClick"],at=t("i",{class:"bi bi-dash-lg"},null,-1),rt=[at],dt=["onUpdate:modelValue"],ct=["onClick"],pt=t("i",{class:"bi bi-plus-lg"},null,-1),ut=[pt],mt={class:"col-lg-5"},_t={class:"p-lg-7 rounded-2 shadow-lg-lg"},ht=t("p",{class:"fs-lg pb-4 border-bottom border-dark border-opacity-10 mb-4"}," 訂單資訊 ",-1),ft={class:"pb-6 border-bottom border-dark border-opacity-10 mb-4"},bt={class:"mb-4 d-flex justify-content-between"},gt=t("p",null,"總數量",-1),yt={class:"font-arimo"},xt={class:"mb-4 d-flex justify-content-between"},Ct=t("p",null,"小計",-1),vt={class:"font-arimo"},kt={class:"d-flex justify-content-between"},wt={class:"d-flex justify-content-between mb-6"},Lt=t("p",null,"總計",-1),Tt={class:"font-arimo"},St={key:0},At={class:"d-flex justify-content-between mb-6"},Nt=t("p",null,"優惠券折抵",-1),Vt={class:"font-arimo text-primary"},$t={class:"d-flex justify-content-between mb-6"},jt=t("p",null,"折扣後金額",-1),Pt={class:"font-arimo text-primary"};function Et(s,o,d,Ut,a,f){var b;const L=x("LoadingComponent"),m=x("RouterLink");return i(),n(v,null,[p(L,{isLoading:a.isLoading},null,8,["isLoading"]),t("div",q,[t("span",D,"Shopping Cart ",512),t("h1",M," 購物車 ",512)]),s.totalQty===0?(i(),n("div",R,[B,p(m,{to:"/products",class:"py-2 px-17 rounded-pill d-md-inline-block btn bg-secondary-light btn-outline-dark hover-text-primary hover-border-primary font-english d-none"},{default:_(()=>[r(" 來去逛逛吧！ "),O]),_:1})])):(i(),n("div",Q,[F,t("div",H,[t("div",W,[t("div",z,[t("div",I,[t("div",X,[p(m,{to:"/products",class:"d-flex align-items-center gap-2"},{default:_(()=>[Y,r("還有想要購買的商品嗎？")]),_:1})]),t("div",G,[J,((b=s.cartList.carts)==null?void 0:b.length)>0?(i(),n("button",{key:0,class:"py-2 px-8 rounded-pill fs-sm bg-secondary-light py-2 px-6 rounded-pill d-inline-block btn btn-outline-dark hover-text-primary hover-border-primary",type:"button",onClick:o[0]||(o[0]=e=>s.deleteAllCartItem())}," 清空購物車 ")):C("",!0)]),t("ul",null,[(i(!0),n(v,null,N(s.cartList.carts,e=>(i(),n("li",{key:e.id},[t("div",K,[t("img",{class:"w-20n",src:e.product.imageUrl,alt:""},null,8,Z),t("div",tt,[t("div",st,[t("p",null,l(e.product.title),1),t("i",{class:"bi bi-x-lg",onClick:c=>s.deleteCartItem(e),disabled:e.id===a.loadingItem},null,8,et)]),t("div",ot,[t("p",it,"NT$ "+l(e.product.price),1),t("div",nt,[t("button",{onClick:c=>s.decreaseNum(e),class:$(["btn rounded-0",{disabled:e.qty==1,"border-0":e.qty===1}])},rt,10,lt),k(t("input",{class:"text-center bg-secondary-light border-0 w-8n w-lg-12n",type:"number","onUpdate:modelValue":c=>e.qty=c,readonly:""},null,8,dt),[[w,e.qty]]),t("button",{class:"btn rounded-0",onClick:c=>s.addNum(e)},ut,8,ct)])])])])]))),128))])])]),t("div",mt,[t("div",_t,[ht,t("div",ft,[t("div",bt,[gt,t("p",null,[r(" 共 "),t("span",yt,l(s.totalQty),1),r(" 個 ")])]),t("div",xt,[Ct,t("p",vt,"NT$ "+l(s.cartList.total),1)]),t("div",kt,[k(t("input",{type:"text",class:"form-control rounded-0 border-secondary w-70","onUpdate:modelValue":o[1]||(o[1]=e=>a.couponCode=e),placeholder:"請輸入優惠碼"},null,512),[[w,a.couponCode]]),t("button",{type:"button",class:"btn btn-primary w-30 rounded-0 text-light fs-sm border-0",onClick:o[2]||(o[2]=(...e)=>f.useCoupon&&f.useCoupon(...e))}," 使用優惠券 ")])]),t("div",wt,[Lt,t("p",Tt,"NT$ "+l(Math.round(s.cartList.total)),1)]),a.isCouponUsed?(i(),n("div",St,[t("div",At,[Nt,t("p",Vt," NT$ "+l(Math.round(s.cartList.total)-Math.round(s.cartList.final_total)),1)]),t("div",$t,[jt,t("p",Pt," NT$ "+l(Math.round(s.cartList.final_total)),1)])])):C("",!0),p(m,{to:"/order",class:"btn btn-primary text-light w-100"},{default:_(()=>[r("去買單")]),_:1})])])])])]))],64)}const os=j(U,[["render",Et]]);export{os as default};
