import{c as v}from"./cartStore-8c707c27.js";import{f as b}from"./favoriteStore-74d519fc.js";import{g as d,S as w}from"./gsap-8fc7659c.js";import{S as y}from"./split-type-cdcb87fd.js";import{m as C,a as x}from"./pinia-a78a79b1.js";import{T as g}from"./toast-94376381.js";import{aN as k,aD as a,X as l,a4 as P,Y as t,as as n,F as m,aL as L,bp as u,bk as S,a_ as h,W as $}from"./@vue-9b9f1f8d.js";import{_ as F}from"./index-f2d211fb.js";import"./axios-bff3f665.js";import"./vue-demi-71ba0ef2.js";import"./sweetalert2-761b07dd.js";import"./@ckeditor-34cd5b3f.js";import"./vue-d45f05e8.js";import"./vue-router-fe912644.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-89c4fdf0.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */d.registerPlugin(y,w);const{VITE_APP_URL:f,VITE_APP_PATH:_}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},V={emits:["split-index-products"],data(){return{productList:[],page:{},selectCategoryList:[],selectCategory:"",nowCategory:"",allProducts:[],isLoading:!1}},methods:{getProductList(o=1){this.isLoading=!0,this.$http.get(`${f}/api/${_}/products/?page=${o}`).then(s=>{this.productList=s.data.products,this.page=s.data.pagination,this.isLoading=!1}).catch(s=>{g.fire({icon:"error",title:`${s.response.data.message}`})})},getAllProducts(){this.isLoading=!0,this.$http.get(`${f}/api/${_}/products/all`).then(o=>{this.allProducts=o.data.products,this.isLoading=!1}).catch(o=>{g.fire({icon:"error",title:`${o.response.data.message}`})})},getCategory(o,s=1){this.$http.get(`${f}/api/${_}/products?page=${s}&category=${o}`).then(r=>{this.selectCategoryList=r.data.products,this.page=r.data.pagination,this.nowCategory=this.page.category,this.$router.push(`./products?page=${s}&category=${o}`)}).catch(r=>{g.fire({icon:"error",title:`${r.response.data.message}`})})},...C(v,["addToCart"]),...C(b,["removeFavorite","toggleFavorite","isFavorite"])},computed:{...x(b,["myFavoriteList"]),...x(v,["loadingItem"]),filterProduct(){return this.productList.filter(o=>o.title.match(this.search))},categoryProducts(){return this.allProducts.filter(o=>o.category.match(this.selectCategory))}},watch:{myFavoriteList:{handler(){localStorage.setItem("myFavoriteList",JSON.stringify(this.myFavoriteList))},deep:!0}},mounted(){this.getCategory("",1),this.getAllProducts();const o=this.$refs.splitAllProducts,s=this.$refs.splitAllProductsCh;new y(o),new y(s),s.querySelectorAll(".line").forEach(r=>{r.style.textAlign="end"}),this.$nextTick(()=>{d.fromTo(s.querySelectorAll(".char"),{y:0,opacity:0},{y:0,x:0,opacity:1,stagger:.05,delay:1,duration:.2}),d.fromTo(o.querySelectorAll(".char"),{y:0,opacity:0},{y:0,x:0,opacity:1,stagger:.05,delay:1,duration:.2});const r=document.querySelectorAll(".mask-bg");d.to(r,{duration:1,width:"0%",ease:"power3.inOut"})})},updated(){w.refresh()}},E={class:"title my-10 my-lg-15"},I={class:"title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end",ref:"splitAllProducts"},j={class:"title-main font-serifTc fw-black fs-xl fs-lg-3xl clip-path",ref:"splitAllProductsCh"},N={class:"container"},R={class:"row justify-content-center"},B={class:"col-md-12"},D={class:"d-flex align-items-center justify-content-center justify-content-md-start py-10 border-top border-bottom border-secondary mb-15"},U=t("h3",{class:"fs-sm fs-md-base d-none d-md-block me-12 font-serifTc"}," 商品類別 ",-1),q={class:"d-flex gap-7 justify-content-center"},O=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"全部",-1),H=[O],z=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"餅乾",-1),M=[z],W=t("p",{class:"px-3 px-md-4 py-1 font-serifTc"},"布丁",-1),J=[W],X={class:"row gy-13"},Y={class:"position-relative"},G=["src","alt"],K={class:"position-absolute z-2 end-4n top-4n"},Q=["onClick"],Z=["onClick"],tt={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},et={class:"font-serifTc fs-base mb-4 text-center letterSpace-2"},st={class:"position-relative"},ot=["onClick"],it={key:0,class:"position-absolute top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center bg-secondary-light border border-primary"},rt=t("div",{class:"spinner-border text-primary spinner-border-sm",role:"status"},[t("span",{class:"sr-only"})],-1),at=[rt],lt={class:"container d-flex justify-content-center py-9"},nt={class:"d-flex align-items-center gap-7"},ct=t("i",{class:"bi bi-arrow-left fs-xl fs-lg-3xl"},null,-1),dt=[ct],pt=["onClick"],gt=t("i",{class:"bi bi-arrow-right fs-xl fs-lg-3xl"},null,-1),mt=[gt];function ut(o,s,r,ht,i,c){const T=k("VueLoading"),A=k("RouterLink");return a(),l(m,null,[P(T,{active:i.isLoading,"onUpdate:active":s[0]||(s[0]=e=>i.isLoading=e)},null,8,["active"]),t("div",E,[t("span",I,"All Products ",512),t("h1",j," 商品ㄧ覽 ",512)]),t("div",N,[t("div",R,[t("div",B,[t("div",D,[U,t("ul",q,[t("li",{class:n(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory===""}]),onClick:s[1]||(s[1]=e=>c.getCategory(""))},H,2),t("li",{class:n(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="餅乾"}]),onClick:s[2]||(s[2]=e=>c.getCategory("餅乾"))},M,2),t("li",{class:n(["fs-sm fs-md-base cursor-pointer cursor-pointer",{"text-primary":i.nowCategory==="布丁"}]),onClick:s[3]||(s[3]=e=>c.getCategory("布丁"))},J,2)])]),t("ul",X,[(a(!0),l(m,null,L(i.selectCategoryList,e=>(a(),l("li",{class:"col-sm-6 col-lg-4 d-flex flex-column align-items-center",key:e.id},[t("div",Y,[P(A,{to:`/product/${e.id}`,class:"mb-6 imgHover"},{default:S(()=>[t("img",{src:e.imageUrl,alt:e.title},null,8,G)]),_:2},1032,["to"]),t("div",K,[o.isFavorite(e)?(a(),l("i",{key:0,class:"bi bi-heart-fill fs-xl text-light",onClick:p=>o.toggleFavorite(e)},null,8,Q)):(a(),l("i",{key:1,class:"bi bi-heart fs-xl text-light",onClick:p=>o.toggleFavorite(e)},null,8,Z))])]),t("h2",tt,h(e.title),1),t("p",et," NT$ "+h(e.price),1),t("div",st,[t("button",{type:"button",class:n(["btn btn-outline-primary rounded-0",{disabled:e.id===o.loadingItem}]),onClick:p=>o.addToCart(e.id)}," 加入購物車 ",10,ot),e.id===o.loadingItem?(a(),l("div",it,at)):$("",!0)])]))),128))])])])]),t("div",lt,[t("div",null,[t("ul",nt,[t("li",{class:n(["page-item",{disabled:i.page.has_pre===!1}])},[t("a",{class:"page-link",href:"#",onClick:s[4]||(s[4]=u(e=>c.getCategory(i.nowCategory,i.page.current_page-1),["prevent"]))},dt)],2),(a(!0),l(m,null,L(i.page.total_pages,e=>(a(),l("li",{class:n(["page-item",{active:e===i.page.current_page,disabled:e===i.page.current_page}]),key:e+"pages"},[t("a",{class:"page-link font-english fs-3xl fs-lg-5xl pb-2",href:"#",onClick:u(p=>c.getCategory(i.nowCategory,e),["prevent"])},h(e),9,pt)],2))),128)),t("li",{class:n(["page-item",{disabled:!i.page.has_next}])},[t("a",{class:"page-link",href:"#",onClick:s[5]||(s[5]=u(e=>c.getCategory(i.nowCategory,i.page.current_page+1),["prevent"]))},mt)],2)])])])],64)}const jt=F(V,[["render",ut]]);export{jt as default};
