import{c as g}from"./cartStore-829a785f.js";import{L}from"./LoadingComponent-b2dfeb65.js";import{g as u}from"./gsap-8fc7659c.js";import{S as b}from"./split-type-cdcb87fd.js";import{m as S,a as T}from"./pinia-a2ec2acd.js";import{T as y}from"./toast-1797c5ef.js";import{aN as x,aD as i,X as n,a4 as p,Y as t,bk as _,W as A,F as C,aL as V,a3 as l,a_ as r,bm as v,bd as k,a2 as N,as as $}from"./@vue-9b9f1f8d.js";import{_ as P}from"./index-042ac8b2.js";import"./axios-bff3f665.js";import"./loadingStore-76618adb.js";import"./logo-ec0194c9.js";import"./vue-demi-71ba0ef2.js";import"./sweetalert2-2726e422.js";import"./@ckeditor-f5fb1894.js";import"./vue-cfa7fbc0.js";import"./vue-router-fe912644.js";import"./aos-dcf01651.js";import"./vue-axios-58a7c26f.js";import"./vue-loading-overlay-7a4b91db.js";import"./vee-validate-aa5cd44a.js";import"./@vee-validate-533577de.js";/* empty css                        */u.registerPlugin(b);const{VITE_APP_URL:j,VITE_APP_PATH:E}={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"week3dean",BASE_URL:"/iiincookie-vue/",MODE:"production",DEV:!1,PROD:!0},q={data(){return{productListData:[],productId:"",loadingItem:"",couponCode:"iiincookienew",isLoading:!0}},components:{LoadingComponent:L},methods:{...S(g,["getCartList","deleteCartItem","updateCartItem","deleteAllCartItem","addNum","decreaseNum"]),useCoupon(){const e={code:this.couponCode};this.$http.post(`${j}/api/${E}/coupon`,{data:e}).then(o=>{y.fire({icon:"success",title:`${o.data.message}`}),this.getCartList()}).catch(o=>{y.fire({icon:"error",title:`${o.response.data.message}`})})}},computed:{...T(g,["cartList","totalQty"])},mounted(){const e=this.$refs.splitCart,o=this.$refs.splitCartCh;new b(e),new b(o),o.querySelectorAll(".line").forEach(a=>{a.style.textAlign="end"}),this.$nextTick(()=>{u.fromTo(o.querySelectorAll(".char"),{y:0,opacity:0},{y:0,x:0,opacity:1,stagger:.05,delay:1,duration:.2}),u.fromTo(e.querySelectorAll(".char"),{y:0,opacity:0},{y:0,x:0,opacity:1,stagger:.05,delay:1,duration:.2});const a=document.querySelectorAll(".mask-bg");u.to(a,{duration:1,width:"0%",ease:"power3.inOut"})}),this.getCartList(),this.isLoading=!1}},D={class:"title my-10 my-lg-15"},U={class:"title-sub fs-10xl fw-light font-english text-secondary text-opacity-50 d-block text-end",ref:"splitCart"},R={class:"title-main font-serifTc fw-black fs-xl fs-lg-3xl",ref:"splitCartCh"},B={key:0,class:"container d-flex flex-column align-items-center gap-6 mt-12"},O=t("p",{class:"text-center fs-lg-xl"},"目前購物車是空的喔！",-1),Q=t("i",{class:"bi bi-arrow-up-right fs-xs ms-2"},null,-1),F={key:1},H=N('<div class="container"><ul class="d-flex justify-content-center align-items-center gap-lg-7 gap-1"><li class="text-center text-primary"><p class="fs-xs fs-lg-sm">Step.1</p><p class="fs-xs fs-lg-sm">購買項目</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.2</p><p class="fs-xs fs-lg-sm">填寫資料</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.3</p><p class="fs-xs fs-lg-sm">確認付款</p></li><i class="bi bi-chevron-right"></i><li class="text-center"><p class="fs-xs fs-lg-sm">Step.4</p><p class="fs-xs fs-lg-sm">訂單完成</p></li></ul></div>',1),M={class:"container"},W={class:"row my-13"},z={class:"col-lg-7 mb-8 mb-lg-0"},I={class:"p-lg-7 rounded-2 shadow-lg-lg"},X={class:"d-flex justify-content-between mb-5"},Y=t("i",{class:"bi bi-chevron-left fs-xl"},null,-1),G={class:"d-flex justify-content-between align-items-center pb-4 border-bottom border-dark border-opacity-10"},J=t("p",{class:"fs-lg"},"購物車品項",-1),K={class:"d-flex py-7 gap-3 border-bottom border-dark border-opacity-10"},Z=["src"],tt={class:"w-100 d-flex flex-column justify-content-between"},st={class:"d-flex justify-content-between align-items-start"},et=["onClick","disabled"],ot={class:"d-flex justify-content-between align-items-end"},it={class:"font-arimo"},nt={class:"count d-flex justify-content-between border border-dark border-opacity-40"},lt=["onClick"],rt=t("i",{class:"bi bi-dash-lg"},null,-1),at=[rt],dt=["onUpdate:modelValue"],ct=["onClick"],pt=t("i",{class:"bi bi-plus-lg"},null,-1),ut=[pt],mt={class:"col-lg-5"},_t={class:"p-lg-7 rounded-2 shadow-lg-lg"},bt=t("p",{class:"fs-lg pb-4 border-bottom border-dark border-opacity-10 mb-4"}," 訂單資訊 ",-1),ft={class:"pb-6 border-bottom border-dark border-opacity-10 mb-4"},ht={class:"mb-4 d-flex justify-content-between"},gt=t("p",null,"總數量",-1),yt={class:"font-arimo"},xt={class:"mb-4 d-flex justify-content-between"},Ct=t("p",null,"小計",-1),vt={class:"font-arimo"},kt={class:"d-flex justify-content-between"},wt={class:"d-flex justify-content-between mb-6"},Lt=t("p",null,"總計",-1),St={class:"font-arimo"};function Tt(e,o,a,At,d,f){var h;const w=x("LoadingComponent"),m=x("RouterLink");return i(),n(C,null,[p(w,{isLoading:d.isLoading},null,8,["isLoading"]),t("div",D,[t("span",U,"Shopping Cart ",512),t("h1",R," 購物車 ",512)]),e.totalQty===0?(i(),n("div",B,[O,p(m,{to:"/products",class:"py-2 px-17 rounded-pill d-md-inline-block btn bg-secondary-light btn-outline-dark hover-text-primary hover-border-primary font-english d-none"},{default:_(()=>[l(" 來去逛逛吧！ "),Q]),_:1})])):(i(),n("div",F,[H,t("div",M,[t("div",W,[t("div",z,[t("div",I,[t("div",X,[p(m,{to:"/products",class:"d-flex align-items-center gap-2 gap-lg-6"},{default:_(()=>[Y,l("還有想要購買的商品嗎？")]),_:1})]),t("div",G,[J,((h=e.cartList.carts)==null?void 0:h.length)>0?(i(),n("button",{key:0,class:"py-2 px-8 rounded-pill fs-sm bg-secondary-light py-2 px-6 rounded-pill d-inline-block btn btn-outline-dark hover-text-primary hover-border-primary",type:"button",onClick:o[0]||(o[0]=s=>e.deleteAllCartItem())}," 清空購物車 ")):A("",!0)]),t("ul",null,[(i(!0),n(C,null,V(e.cartList.carts,s=>(i(),n("li",{key:s.id},[t("div",K,[t("img",{class:"w-20n",src:s.product.imageUrl,alt:""},null,8,Z),t("div",tt,[t("div",st,[t("p",null,r(s.product.title),1),t("i",{class:"bi bi-x-lg",onClick:c=>e.deleteCartItem(s),disabled:s.id===d.loadingItem},null,8,et)]),t("div",ot,[t("p",it,"NT$ "+r(s.product.price),1),t("div",nt,[t("button",{onClick:c=>e.decreaseNum(s),class:$(["btn rounded-0",{disabled:s.qty==1,"border-0":s.qty===1}])},at,10,lt),v(t("input",{class:"text-center bg-secondary-light border-0 w-8n w-lg-12n",type:"number","onUpdate:modelValue":c=>s.qty=c,readonly:""},null,8,dt),[[k,s.qty]]),t("button",{class:"btn rounded-0",onClick:c=>e.addNum(s)},ut,8,ct)])])])])]))),128))])])]),t("div",mt,[t("div",_t,[bt,t("div",ft,[t("div",ht,[gt,t("p",null,[l(" 共 "),t("span",yt,r(e.totalQty),1),l(" 個 ")])]),t("div",xt,[Ct,t("p",vt,"NT$ "+r(e.cartList.total),1)]),t("div",kt,[v(t("input",{type:"text",class:"form-control rounded-0 border-secondary w-70","onUpdate:modelValue":o[1]||(o[1]=s=>d.couponCode=s),placeholder:"請輸入優惠碼"},null,512),[[k,d.couponCode]]),t("button",{type:"button",class:"btn btn-primary w-30 rounded-0 text-light fs-sm border-0",onClick:o[2]||(o[2]=(...s)=>f.useCoupon&&f.useCoupon(...s))}," 使用優惠券 ")])]),t("div",wt,[Lt,t("p",St,"NT$ "+r(e.cartList.final_total),1)]),p(m,{to:"/order",class:"btn btn-primary text-light w-100"},{default:_(()=>[l("去買單")]),_:1})])])])])]))],64)}const Jt=P(q,[["render",Tt]]);export{Jt as default};
